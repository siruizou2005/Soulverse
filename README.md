# Soulverse

<div align="center">

**åŸºäºå¤š Agent æ¨¡æ‹Ÿçš„"å¹³è¡Œæ—¶ç©º"ç¤¾äº¤æ²™ç›’**

[![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)](https://www.python.org/)
[![Next.js](https://img.shields.io/badge/Next.js-14.2-black.svg)](https://nextjs.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104+-green.svg)](https://fastapi.tiangolo.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

[English](#introduction) | [ä¸­æ–‡](#é¡¹ç›®æ¦‚è¿°)

</div>

---

## é¡¹ç›®æ¦‚è¿°

**Soulverse** æ˜¯ä¸€ä¸ªåˆ›æ–°çš„"å¹³è¡Œæ—¶ç©º"ç¤¾äº¤æ²™ç›’ç³»ç»Ÿï¼ŒåŸºäº ScrollWeaver å¤šæ™ºèƒ½ä½“å¼•æ“æ„å»ºã€‚æ¯ä½ç”¨æˆ·éƒ½èƒ½åŸºäºå…´è¶£å›¾è°±ç”Ÿæˆä¸€ä¸ª"AI çµé­‚"ï¼ˆæ•°å­—å­ªç”Ÿ Agentï¼‰ï¼Œè¿™ä¸ª AI çµé­‚å¯ä»¥åœ¨è™šæ‹Ÿä¸–ç•Œä¸­è‡ªä¸»ç”Ÿæ´»ã€ç»“è¯†åŒç±»ï¼Œè€Œç”¨æˆ·æ—¢å¯ä»¥"é›¶å‹åŠ›"è§‚å¯Ÿï¼Œä¹Ÿèƒ½éšæ—¶"çµé­‚é™ä¸´"äº²è‡ªäº’åŠ¨ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸ­ **è§‚å¯Ÿè€…æ¨¡å¼**ï¼šé›¶å‹åŠ›ç¤¾äº¤ï¼Œçœ‹ç€ä½ çš„ AI æ›¿ä½ ç ´å†°ã€äº¤å‹ã€ç”Ÿæ´»
- âš¡ **çµé­‚é™ä¸´æ¨¡å¼**ï¼šå…³é”®æ—¶åˆ»ä¸€é”®æ¥ç®¡ï¼Œäº²è‡ªæ”¹å†™å‰§æƒ…
- ğŸ’« **åŠ¨æ€åŒ¹é…**ï¼šåŸºäº AI äº’åŠ¨äº§ç”Ÿçš„çœŸå®æ•…äº‹æ¥å¯»æ‰¾çµé­‚ä¼´ä¾£
- ğŸ§  **ä¸‰å±‚äººæ ¼æ¨¡å‹**ï¼šå†…æ ¸å±‚ï¼ˆè®¤çŸ¥ä¸ç‰¹è´¨ï¼‰ã€è¡¨è±¡å±‚ï¼ˆè¯­è¨€ä¸è¡Œä¸ºæ¨¡å¼ï¼‰ã€è®°å¿†å±‚ï¼ˆç»å†ä¸å…³ç³»ï¼‰
- ğŸŒ **å¤š Agent ç¤¾ä¼šç³»ç»Ÿ**ï¼šä»"å•èŠå…³ç³»"å‡çº§ä¸º"ä¸–ç•Œçº§äº’åŠ¨"
- ğŸ“Š **ç¤¾äº¤æ•…äº‹ç”Ÿæˆ**ï¼šè‡ªåŠ¨ç”Ÿæˆç¤¾äº¤äº’åŠ¨æ•…äº‹å’Œæ¯æ—¥æŠ¥å‘Š
- ğŸ”„ **æŒç»­è¿è¡Œ**ï¼šæ”¯æŒé•¿æœŸè¿è¡Œï¼ˆ100+ è½®æ¬¡ï¼‰ï¼Œå³ä½¿ç¦»çº¿ä¹Ÿåœ¨å»¶ç»­æ•…äº‹

### è§£å†³çš„é—®é¢˜

- **ç¤¾äº¤å¯åŠ¨å›°éš¾**ï¼šè§£å†³"ç ´å†°"å°´å°¬ï¼Œé™ä½ç¤¾äº¤æ¶ˆè€—
- **åŒ¹é…è´¨é‡è‚¤æµ…**ï¼šç”¨åŠ¨æ€äº’åŠ¨è¯æ®å–ä»£é™æ€æ ‡ç­¾
- **æ—¶é—´ç²¾åŠ›æœ‰é™**ï¼šå³ä½¿ç¦»çº¿ï¼ŒAI ä¹Ÿåœ¨ä¸ºä½ å»¶ç»­æ•…äº‹

---

## Introduction

**Soulverse** is an innovative "parallel universe" social sandbox system built on the ScrollWeaver multi-agent engine. Each user can generate an "AI soul" (digital twin Agent) based on their interest profile. This AI soul can autonomously live and interact in the virtual world, while users can either observe with "zero pressure" or "possess" the soul at any time for direct interaction.

### Key Features

- ğŸ­ **Observer Mode**: Zero-pressure social interaction, watch your AI break the ice, make friends, and live
- âš¡ **Soul Possession Mode**: Take control at key moments, rewrite the story yourself
- ğŸ’« **Dynamic Matching**: Find soulmates based on real stories generated from AI interactions
- ğŸ§  **Three-Layer Personality Model**: Core layer (cognition & traits), surface layer (language & behavior patterns), memory layer (experiences & relationships)
- ğŸŒ **Multi-Agent Social System**: Upgrade from "single-chat relationships" to "world-level interactions"
- ğŸ“Š **Social Story Generation**: Automatically generate social interaction stories and daily reports
- ğŸ”„ **Continuous Operation**: Supports long-term running (100+ rounds), stories continue even when offline

---

## æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: FastAPI + WebSocket
- **å¤šæ™ºèƒ½ä½“å¼•æ“**: ScrollWeaver
- **LLM æ”¯æŒ**: OpenAI, Gemini, DeepSeek, Claude, Qwen, Doubao, Ollama, VLLM ç­‰
- **å‘é‡æ•°æ®åº“**: ChromaDB (ç”¨äº RAG æ£€ç´¢å’Œé•¿æœŸè®°å¿†å­˜å‚¨)
- **åµŒå…¥æ¨¡å‹**: BGE-small, æ”¯æŒä¸­è‹±æ–‡
- **ä¼šè¯ç®¡ç†**: Starlette SessionMiddleware

### å‰ç«¯æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Next.js 14 + React 18
- **3D æ¸²æŸ“**: Three.js + React Three Fiber
- **UI åº“**: Tailwind CSS + Framer Motion
- **å›¾è¡¨**: Chart.js + D3.js
- **Markdown**: React Markdown

### æ ¸å¿ƒæ¨¡å—

- **ScrollWeaver**: å¤šæ™ºèƒ½ä½“æ¨¡æ‹Ÿå¼•æ“æ ¸å¿ƒ
- **Orchestrator**: ä¸–ç•ŒæŒ‡æŒ¥å®¶ï¼Œè´Ÿè´£åœºæ™¯è°ƒåº¦å’Œäº‹ä»¶ç”Ÿæˆ
- **UserAgent**: ç”¨æˆ· Agentï¼ŒåŸºäºå…´è¶£å›¾è°±åˆ›å»º
- **NPCAgent**: NPC Agentï¼Œé¢„è®¾æ¨¡æ¿æˆ–åŠ¨æ€åˆ›å»º
- **PersonalityModel**: ä¸‰å±‚äººæ ¼æ¨¡å‹ï¼ˆå†…æ ¸å±‚ã€è¡¨è±¡å±‚ã€è®°å¿†å±‚ï¼‰
- **SocialStoryGenerator**: ç¤¾äº¤æ•…äº‹ç”Ÿæˆå™¨
- **DailyReportGenerator**: æ¯æ—¥æŠ¥å‘Šç”Ÿæˆå™¨
- **NeuralMatching**: ç¥ç»åŒ¹é…ç®—æ³•ï¼ŒåŸºäºå…´è¶£ã€MBTIã€ç¤¾äº¤ç›®æ ‡

---

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Python 3.10+
- Node.js 18+
- npm æˆ– yarn
- è‡³å°‘ä¸€ä¸ª LLM API Key (OpenAI/Gemini/DeepSeek ç­‰)

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†ä»“åº“

```bash
git clone https://github.com/Jinqitrip/Soulverse.git
cd Soulverse
```

#### 2. å®‰è£… Python ä¾èµ–

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰
conda create -n soulverse python=3.10
conda activate soulverse

# æˆ–ä½¿ç”¨ venv
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

#### 3. å®‰è£…å‰ç«¯ä¾èµ–

```bash
cd frontend
npm install
cd ..
```

#### 4. é…ç½®

ç¼–è¾‘ `config.json` æ–‡ä»¶ï¼š

```json
{
    "role_llm_name": "gemini-2.5-flash-lite",
    "world_llm_name": "gemini-2.5-flash-lite",
    "embedding_model_name": "bge-small",
    "preset_path": "./experiment_presets/soulverse_sandbox.json",
    "if_save": 0,
    "scene_mode": 1,
    "rounds": 100,
    "save_dir": "",
    "mode": "free",
    
    "OPENAI_API_KEY": "your-openai-key",
    "GEMINI_API_KEY": "your-gemini-key",
    "DEEPSEEK_API_KEY": "your-deepseek-key"
}
```

**é…ç½®è¯´æ˜**ï¼š
- `role_llm_name`: Agent ä½¿ç”¨çš„ LLM æ¨¡å‹
- `world_llm_name`: ä¸–ç•Œæ¨¡æ‹Ÿä½¿ç”¨çš„ LLM æ¨¡å‹
- `embedding_model_name`: åµŒå…¥æ¨¡å‹åç§°ï¼ˆç”¨äºå‘é‡æ£€ç´¢ï¼‰
- `preset_path`: å®éªŒé¢„è®¾æ–‡ä»¶è·¯å¾„
- `rounds`: æ¨¡æ‹Ÿè½®æ¬¡ï¼ˆSoulverse æ¨¡å¼å»ºè®® 100+ï¼‰
- `mode`: æ¨¡æ‹Ÿæ¨¡å¼ï¼ˆ"free" è‡ªç”±æ¨¡å¼ï¼‰

### è¿è¡Œé¡¹ç›®

#### å¼€å‘æ¨¡å¼

**å¯åŠ¨åç«¯æœåŠ¡å™¨**ï¼š
```bash
python server.py
# æˆ–
uvicorn server:app --host 127.0.0.1 --port 8001
```

**å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨**ï¼ˆæ–°ç»ˆç«¯ï¼‰ï¼š
```bash
cd frontend
npm run dev
```

è®¿é—®ï¼š
- å‰ç«¯ï¼šhttp://localhost:3000
- åç«¯ APIï¼šhttp://localhost:8001
- API æ–‡æ¡£ï¼šhttp://localhost:8001/docs

#### ç”Ÿäº§æ¨¡å¼

**æ„å»ºå‰ç«¯**ï¼š
```bash
cd frontend
npm run build
```

**å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨**ï¼š
```bash
python server.py
```

è®¿é—®ï¼šhttp://localhost:8001

#### Docker éƒ¨ç½²

```bash
docker build -t soulverse .
docker run -p 8001:8001 soulverse
```

---

## ä½¿ç”¨æŒ‡å—

### 1. ç”¨æˆ·æ³¨å†Œ/ç™»å½•

- è®¿é—®ç™»å½•é¡µé¢
- æ”¯æŒç”¨æˆ·æ³¨å†Œæˆ–è®¿å®¢æ¨¡å¼
- è®¿å®¢æ¨¡å¼ä¼šè‡ªåŠ¨ç”Ÿæˆä¸´æ—¶ç”¨æˆ· ID

### 2. åˆ›å»ºæ•°å­—å­ªç”Ÿ Agent

#### æ–¹å¼ä¸€ï¼šé€šè¿‡ Soul APIï¼ˆæ¨¡æ‹Ÿï¼‰

```bash
POST /api/create-user-agent
{
    "user_id": "user_001",
    "role_code": "my_agent_001"
}
```

ç³»ç»Ÿä¼šè‡ªåŠ¨ä» Soul mock API è·å–ç”¨æˆ·ç”»åƒï¼ˆå…´è¶£ã€MBTIã€äººæ ¼ç­‰ï¼‰ã€‚

#### æ–¹å¼äºŒï¼šä»æ–‡æœ¬æå–

```bash
POST /api/create-agent-from-text
{
    "user_id": "user_001",
    "role_code": "my_agent_002",
    "text": "ç”¨æˆ·æä¾›çš„æ–‡æœ¬æè¿°..."
}
```

#### æ–¹å¼ä¸‰ï¼šä»æ–‡ä»¶ä¸Šä¼ 

```bash
POST /api/create-agent-from-file
FormData:
    - user_id: "user_001"
    - role_code: "my_agent_003"
    - file: <file>
```

#### æ–¹å¼å››ï¼šé€šè¿‡é—®ç­”

```bash
POST /api/create-agent-from-qa
{
    "user_id": "user_001",
    "role_code": "my_agent_004",
    "answers": {
        "q1": "answer1",
        "q2": "answer2"
    }
}
```

### 3. è§‚å¯Ÿè€…æ¨¡å¼

**åŠŸèƒ½**ï¼šæŸ¥çœ‹ä½ çš„ Agent åœ¨è™šæ‹Ÿä¸–ç•Œä¸­çš„è‡ªä¸»æ´»åŠ¨

**ä½¿ç”¨æ­¥éª¤**ï¼š
1. åœ¨ Soulverse é¢æ¿çš„"è§‚å¯Ÿè€…æ¨¡å¼"åŒºåŸŸ
2. ä»ä¸‹æ‹‰èœå•é€‰æ‹©ä½ çš„ Agent
3. ç‚¹å‡»"æŸ¥çœ‹ç¤¾äº¤æ•…äº‹"æŸ¥çœ‹æœ€è¿‘ 24 å°æ—¶çš„äº’åŠ¨è®°å½•
4. ç‚¹å‡»"æŸ¥çœ‹æ¯æ—¥æŠ¥å‘Š"æŸ¥çœ‹æ¯æ—¥æ´»åŠ¨æ‘˜è¦

**æŸ¥çœ‹å†…å®¹**ï¼š
- **ç¤¾äº¤æ•…äº‹**ï¼šAgent çš„æ‰€æœ‰äº’åŠ¨è®°å½•ï¼ŒæŒ‰æ—¶é—´æ’åº
- **æ¯æ—¥æŠ¥å‘Š**ï¼šåŒ…å«æ‘˜è¦ã€äº®ç‚¹äº‹ä»¶ã€äº’åŠ¨ç»Ÿè®¡ç­‰

### 4. çµé­‚é™ä¸´æ¨¡å¼

**åŠŸèƒ½**ï¼šå®Œå…¨æ§åˆ¶ä½ çš„ Agent å¹¶å‚ä¸äº’åŠ¨

**ä½¿ç”¨æ­¥éª¤**ï¼š
1. ä»å·¦ä¾§è§’è‰²åˆ—è¡¨é€‰æ‹©ä½ çš„ Agentï¼ˆæˆ–é€šè¿‡"é€‰æ‹©è§’è‰²"æŒ‰é’®ï¼‰
2. ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹è¿™æ˜¯ç”¨æˆ· Agent å¹¶è¿›å…¥çµé­‚é™ä¸´æ¨¡å¼
3. å½“ Agent éœ€è¦è¡ŒåŠ¨æ—¶ï¼Œç³»ç»Ÿæš‚åœå¹¶ç­‰å¾…ä½ çš„è¾“å…¥
4. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ Agent çš„è¡ŒåŠ¨/å¯¹è¯
5. ç‚¹å‡»"AI è‡ªåŠ¨è¡¥å…¨"æŒ‰é’®è·å– AI å»ºè®®çš„è¡ŒåŠ¨é€‰é¡¹

**æ¨¡å¼åˆ‡æ¢**ï¼š
- ç‚¹å‡»"è¿›å…¥çµé­‚é™ä¸´"æŒ‰é’®æ‰‹åŠ¨åˆ‡æ¢æ¨¡å¼
- è§‚å¯Ÿè€…æ¨¡å¼ï¼šAgent è‡ªä¸»è¡ŒåŠ¨ï¼Œä½ åªèƒ½æŸ¥çœ‹
- çµé­‚é™ä¸´æ¨¡å¼ï¼šæ‰€æœ‰ Agent è¡ŒåŠ¨éƒ½éœ€è¦ä½ çš„è¾“å…¥

### 5. ç¥ç»åŒ¹é…

**åŠŸèƒ½**ï¼šåŸºäºå…´è¶£ã€MBTIã€ç¤¾äº¤ç›®æ ‡åŒ¹é…æœ€åˆé€‚çš„ Agent

```bash
POST /api/neural-match
{
    "user_id": "user_001"
}
```

è¿”å›ï¼š
- Top 3 å®Œç¾å…±æŒ¯ Agent
- 2 ä¸ªéšæœºé‚‚é€… Agent

### 6. æ·»åŠ é¢„è®¾ NPC

```bash
POST /api/add-preset-npc
{
    "preset_id": "preset_001",  # é¢„è®¾æ¨¡æ¿ ID
    "custom_name": "è‡ªå®šä¹‰åç§°ï¼ˆå¯é€‰ï¼‰",
    "role_code": "è‡ªå®šä¹‰ role_codeï¼ˆå¯é€‰ï¼‰"
}
```

**å¯ç”¨é¢„è®¾æ¨¡æ¿**ï¼š
- `preset_001`: æ–‡è‰ºé’å¹´ (INFP)
- `preset_002`: ç§‘æŠ€æå®¢ (INTP)
- `preset_003`: è¿åŠ¨çˆ±å¥½è€… (ESFP)
- `preset_004`: è‰ºæœ¯åˆ›ä½œè€… (ENFP)
- `preset_005`: ç¾é£Ÿæ¢ç´¢å®¶ (ISFP)
- `preset_006`: å“²å­¦æ€è€ƒè€… (INFJ)

---

## API æ–‡æ¡£

### ç”¨æˆ·ç®¡ç†

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/login` | POST | ç”¨æˆ·ç™»å½•ï¼ˆæ”¯æŒè®¿å®¢æ¨¡å¼ï¼‰ |
| `/api/register` | POST | ç”¨æˆ·æ³¨å†Œ |
| `/api/logout` | POST | ç”¨æˆ·é€€å‡ºç™»å½• |
| `/api/user/me` | GET | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ |

### Agent ç®¡ç†

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/create-user-agent` | POST | åˆ›å»ºç”¨æˆ· Agent |
| `/api/create-agent-from-text` | POST | ä»æ–‡æœ¬åˆ›å»º Agent |
| `/api/create-agent-from-file` | POST | ä»æ–‡ä»¶åˆ›å»º Agent |
| `/api/create-agent-from-qa` | POST | é€šè¿‡é—®ç­”åˆ›å»º Agent |
| `/api/add-preset-npc` | POST | æ·»åŠ é¢„è®¾ NPC |
| `/api/toggle-agent-sandbox` | POST | åˆ‡æ¢ Agent æ²™ç›’çŠ¶æ€ |
| `/api/restore-user-agent` | POST | æ¢å¤ç”¨æˆ· Agent |

### æ•°å­—å­ªç”Ÿ

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/user/digital-twin` | POST | åˆ›å»º/æ›´æ–°æ•°å­—å­ªç”Ÿ |
| `/api/user/digital-twin` | GET | è·å–æ•°å­—å­ªç”Ÿä¿¡æ¯ |
| `/api/generate-digital-twin-profile` | POST | ç”Ÿæˆæ•°å­—å­ªç”Ÿå®Œæ•´ç”»åƒ |

### ç¤¾äº¤åŠŸèƒ½

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/get-social-story/{agent_code}` | GET | è·å–ç¤¾äº¤æ•…äº‹ï¼ˆæ”¯æŒ hours å‚æ•°ï¼‰ |
| `/api/get-daily-report/{agent_code}` | GET | è·å–æ¯æ—¥æŠ¥å‘Šï¼ˆæ”¯æŒ date å‚æ•°ï¼‰ |
| `/api/neural-match` | POST | ç¥ç»åŒ¹é…ç®—æ³• |
| `/api/list-preset-agents` | GET | åˆ—å‡ºæ‰€æœ‰é¢„è®¾ Agent |

### èŠå¤©åŠŸèƒ½

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/ws/{client_id}` | WebSocket | WebSocket è¿æ¥ï¼ˆå®æ—¶èŠå¤©ï¼‰ |
| `/api/start-1on1-chat` | POST | å¯åŠ¨ä¸€å¯¹ä¸€èŠå¤© |
| `/api/clear-chat-history` | POST | æ¸…ç©ºèŠå¤©å†å² |

### ç³»ç»Ÿç®¡ç†

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/reset-sandbox` | POST | é‡ç½®æ²™ç›’ |
| `/api/reset-all` | POST | é‡ç½®æ‰€æœ‰ |
| `/api/save-config` | POST | ä¿å­˜é…ç½® |
| `/api/list-presets` | GET | åˆ—å‡ºæ‰€æœ‰é¢„è®¾ |
| `/api/load-preset` | POST | åŠ è½½é¢„è®¾ |

å®Œæ•´çš„ API æ–‡æ¡£å¯åœ¨è¿è¡ŒæœåŠ¡å™¨åè®¿é—®ï¼šhttp://localhost:8001/docs

---

## é¡¹ç›®ç»“æ„

```
Soulverse/
â”œâ”€â”€ data/                          # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ preset_agents/            # é¢„è®¾ Agent æ•°æ®
â”‚   â”‚   â”œâ”€â”€ preset_agents.json    # é¢„è®¾æ¨¡æ¿ JSON
â”‚   â”‚   â””â”€â”€ preset_embeddings.pkl # é¢„è®¾åµŒå…¥å‘é‡
â”‚   â”œâ”€â”€ users/                    # ç”¨æˆ·æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ roles/                    # è§’è‰²æ•°æ®
â”‚   â”‚   â”œâ”€â”€ soulverse_npcs/      # NPC è§’è‰²
â”‚   â”‚   â””â”€â”€ soulverse_users/     # ç”¨æˆ·è§’è‰²
â”‚   â”œâ”€â”€ locations/                # åœ°ç‚¹æ•°æ®
â”‚   â”œâ”€â”€ maps/                     # åœ°å›¾æ•°æ®
â”‚   â””â”€â”€ worlds/                   # ä¸–ç•Œé…ç½®
â”‚       â””â”€â”€ soulverse_sandbox/    # Soulverse æ²™ç›’ä¸–ç•Œ
â”œâ”€â”€ frontend/                      # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ app/                      # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ page.tsx             # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ login/                # ç™»å½•é¡µ
â”‚   â”‚   â””â”€â”€ universe/             # ä¸»ç•Œé¢
â”‚   â”œâ”€â”€ components/               # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ChatInterface.jsx    # èŠå¤©ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ CreationWizard.jsx   # åˆ›å»ºå‘å¯¼
â”‚   â”‚   â”œâ”€â”€ NeuralMatching.jsx   # ç¥ç»åŒ¹é…
â”‚   â”‚   â”œâ”€â”€ UserAgentStatus.jsx  # ç”¨æˆ· Agent çŠ¶æ€
â”‚   â”‚   â””â”€â”€ UniverseView.jsx      # å®‡å®™è§†å›¾
â”‚   â”œâ”€â”€ services/                 # API æœåŠ¡
â”‚   â”‚   â””â”€â”€ api.js               # API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ data/                     # å‰ç«¯æ•°æ®
â”‚   â”‚   â””â”€â”€ questionnaires.js    # é—®å·æ•°æ®
â”‚   â””â”€â”€ package.json             # å‰ç«¯ä¾èµ–
â”œâ”€â”€ modules/                       # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ core/                     # æ ¸å¿ƒå·¥å…·
â”‚   â”œâ”€â”€ db/                       # æ•°æ®åº“æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ BaseDB.py           # æ•°æ®åº“åŸºç±»
â”‚   â”‚   â””â”€â”€ ChromaDB.py          # ChromaDB å®ç°
â”‚   â”œâ”€â”€ llm/                      # LLM é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ BaseLLM.py           # LLM åŸºç±»
â”‚   â”‚   â”œâ”€â”€ OpenAI.py            # OpenAI é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ Gemini.py            # Gemini é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ DeepSeek.py          # DeepSeek é€‚é…å™¨
â”‚   â”‚   â””â”€â”€ ...                   # å…¶ä»– LLM é€‚é…å™¨
â”‚   â”œâ”€â”€ prompt/                   # æç¤ºè¯æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ orchestrator_prompt_zh.py
â”‚   â”‚   â”œâ”€â”€ orchestrator_prompt_en.py
â”‚   â”‚   â”œâ”€â”€ performer_prompt_zh.py
â”‚   â”‚   â””â”€â”€ performer_prompt_en.py
â”‚   â”œâ”€â”€ user_agent.py            # ç”¨æˆ· Agent ç±»
â”‚   â”œâ”€â”€ npc_agent.py             # NPC Agent ç±»
â”‚   â”œâ”€â”€ orchestrator.py          # æŒ‡æŒ¥å®¶ç±»
â”‚   â”œâ”€â”€ main_performer.py        # è¡¨æ¼”è€…åŸºç±»
â”‚   â”œâ”€â”€ personality_model.py     # ä¸‰å±‚äººæ ¼æ¨¡å‹
â”‚   â”œâ”€â”€ soulverse_mode.py        # Soulverse æ¨¡å¼é€»è¾‘
â”‚   â”œâ”€â”€ social_story_generator.py # ç¤¾äº¤æ•…äº‹ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ daily_report.py          # æ¯æ—¥æŠ¥å‘Šç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ preset_agents.py         # é¢„è®¾ Agent ç®¡ç†
â”‚   â””â”€â”€ profile_extractor.py     # ç”»åƒæå–å™¨
â”œâ”€â”€ experiment_presets/           # å®éªŒé¢„è®¾é…ç½®
â”‚   â”œâ”€â”€ soulverse_sandbox.json   # Soulverse æ²™ç›’é¢„è®¾
â”‚   â””â”€â”€ soulverse_1on1.json     # ä¸€å¯¹ä¸€å¯¹è¯é¢„è®¾
â”œâ”€â”€ extract_data/                 # æ•°æ®æå–å·¥å…·
â”‚   â”œâ”€â”€ extract_data.py          # æå–è§’è‰²å’Œåœ°ç‚¹
â”‚   â”œâ”€â”€ extract_settings.py      # æå–ä¸–ç•Œè®¾å®š
â”‚   â””â”€â”€ extract_config.json      # æå–é…ç½®
â”œâ”€â”€ ScrollWeaver.py              # ScrollWeaver æ ¸å¿ƒå¼•æ“
â”œâ”€â”€ server.py                     # FastAPI æœåŠ¡å™¨
â”œâ”€â”€ config.json                   # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt              # Python ä¾èµ–
â”œâ”€â”€ Dockerfile                    # Docker é…ç½®
â””â”€â”€ README.md                     # æœ¬æ–‡æ¡£
```

---

## æ ¸å¿ƒæ¦‚å¿µ

### ä¸‰å±‚äººæ ¼æ¨¡å‹

Soulverse é‡‡ç”¨åˆ›æ–°çš„ä¸‰å±‚äººæ ¼æ¨¡å‹æ¥æ„å»º Agent çš„ä¸ªæ€§ï¼š

1. **å†…æ ¸å±‚ï¼ˆCore Layerï¼‰**
   - MBTI ç±»å‹
   - å¤§äº”äººæ ¼ï¼ˆBig Fiveï¼‰
   - ä»·å€¼è§‚ï¼ˆValuesï¼‰
   - é˜²å¾¡æœºåˆ¶ï¼ˆDefense Mechanismsï¼‰

2. **è¡¨è±¡å±‚ï¼ˆSurface Layerï¼‰**
   - è¯­è¨€é£æ ¼çŸ©é˜µ
     - å¥é•¿åå¥½ï¼ˆçŸ­å¥/ä¸­å¥/é•¿å¥ï¼‰
     - è¯æ±‡ç­‰çº§ï¼ˆå­¦æœ¯/å£è¯­/ç½‘ç»œç”¨è¯­ï¼‰
     - æ ‡ç‚¹ä¹ æƒ¯ï¼ˆå°‘ç”¨/æ ‡å‡†/é¢‘ç¹ï¼‰
     - è¡¨æƒ…ä½¿ç”¨é¢‘ç‡
   - å£å¤´ç¦…åˆ—è¡¨
   - Few-Shot æ ·æœ¬

3. **è®°å¿†å±‚ï¼ˆMemory Layerï¼‰**
   - åŠ¨æ€çŠ¶æ€ï¼ˆå¿ƒæƒ…ã€èƒ½é‡å€¼ï¼‰
   - å…³ç³»æ˜ å°„ï¼ˆä¸å…¶ä»– Agent çš„å…³ç³»ï¼‰
   - é•¿æœŸè®°å¿†ï¼ˆChromaDB å‘é‡å­˜å‚¨ï¼‰
   - çŸ­æœŸè®°å¿†ï¼ˆæœ€è¿‘äº’åŠ¨ï¼‰

### ScrollWeaver æ¶æ„

ScrollWeaver æ˜¯å¤šæ™ºèƒ½ä½“æ¨¡æ‹Ÿçš„æ ¸å¿ƒå¼•æ“ï¼š

- **Server**: ç³»ç»ŸæœåŠ¡å™¨ï¼Œç®¡ç†æ‰€æœ‰ Agent å’Œä¸–ç•ŒçŠ¶æ€
- **Orchestrator**: ä¸–ç•ŒæŒ‡æŒ¥å®¶ï¼Œè´Ÿè´£åœºæ™¯è°ƒåº¦ã€äº‹ä»¶ç”Ÿæˆ
- **Performer**: è¡¨æ¼”è€…åŸºç±»ï¼Œæ‰€æœ‰ Agent çš„çˆ¶ç±»
  - **UserAgent**: ç”¨æˆ· Agentï¼ŒåŸºäºå…´è¶£å›¾è°±
  - **NPCAgent**: NPC Agentï¼Œé¢„è®¾æ¨¡æ¿æˆ–åŠ¨æ€åˆ›å»º
- **HistoryManager**: å†å²ç®¡ç†å™¨ï¼Œè®°å½•æ‰€æœ‰äº’åŠ¨
- **TimeSimulator**: æ—¶é—´æ¨¡æ‹Ÿå™¨ï¼ˆé»˜è®¤ 60 å€é€Ÿï¼š1 åˆ†é’Ÿ = 1 å°æ—¶ï¼‰

### Soulverse æ¨¡å¼

Soulverse æ¨¡å¼æ˜¯ä¸“ä¸ºç¤¾äº¤æ²™ç›’è®¾è®¡çš„æ¨¡å¼ï¼š

- **å¼ºåˆ¶å¯ç”¨**ï¼šç³»ç»Ÿé»˜è®¤å¯ç”¨ Soulverse æ¨¡å¼
- **åŠ¨æ€ Agent**ï¼šæ‰€æœ‰ Agent é€šè¿‡ API åŠ¨æ€æ·»åŠ 
- **ç¤¾äº¤åœºæ™¯**ï¼šåŸºäºå…´è¶£ç”Ÿæˆç¤¾äº¤åœºæ™¯äº‹ä»¶
- **ç¤¾äº¤åŠ¨æœº**ï¼šåŸºäºç¤¾äº¤ç›®æ ‡å’Œå…´è¶£ç”ŸæˆåŠ¨æœºï¼ˆéå‰§æœ¬ï¼‰
- **æŒç»­è¿è¡Œ**ï¼šæ”¯æŒé•¿æœŸè¿è¡Œï¼ˆ100+ è½®æ¬¡ï¼‰

---

## è‡ªå®šä¹‰ä¸æ‰©å±•

### åˆ›å»ºè‡ªå®šä¹‰é¢„è®¾ Agent

1. ç¼–è¾‘ `data/preset_agents/preset_agents.json`
2. æ·»åŠ æ–°çš„é¢„è®¾æ¨¡æ¿ï¼š

```json
{
    "id": "preset_007",
    "name": "è‡ªå®šä¹‰åç§°",
    "icon": "ğŸ¨",
    "description": "æè¿°",
    "interests": ["å…´è¶£1", "å…´è¶£2"],
    "mbti": "ENFP",
    "personality": "äººæ ¼æè¿°",
    "social_goals": ["ç¤¾äº¤ç›®æ ‡1"],
    "big_five": {
        "openness": 0.8,
        "conscientiousness": 0.6,
        "extraversion": 0.7,
        "agreeableness": 0.8,
        "neuroticism": 0.4
    },
    "values": ["ä»·å€¼1", "ä»·å€¼2"],
    "defense_mechanism": "Sublimation"
}
```

3. é€šè¿‡ API åˆ›å»ºï¼š

```bash
POST /api/add-preset-npc
{
    "preset_id": "preset_007"
}
```

### æ·»åŠ æ–°çš„ LLM é€‚é…å™¨

1. åœ¨ `modules/llm/` ç›®å½•åˆ›å»ºæ–°æ–‡ä»¶
2. ç»§æ‰¿ `BaseLLM` ç±»
3. å®ç°å¿…è¦çš„æ–¹æ³•
4. åœ¨ `sw_utils.py` çš„ `get_models()` å‡½æ•°ä¸­æ³¨å†Œ

### è‡ªå®šä¹‰ä¸–ç•Œè®¾å®š

1. ç¼–è¾‘ `data/worlds/soulverse_sandbox/general.json`
2. ä¿®æ”¹ä¸–ç•Œæè¿°ã€è§„åˆ™ç­‰
3. é‡å¯æœåŠ¡å™¨

---

## æµ‹è¯•

### è¿è¡Œæµ‹è¯•è„šæœ¬

```bash
python test_soulverse.py
```

### æµ‹è¯•åœºæ™¯

1. **åŸºç¡€ç¤¾äº¤äº’åŠ¨**ï¼šåˆ›å»ºä¸¤ä¸ªå…´è¶£ç›¸ä¼¼çš„ç”¨æˆ· Agentï¼Œè§‚å¯Ÿä»–ä»¬åœ¨å’–å•¡é¦†ç›¸é‡å¹¶å»ºç«‹è”ç³»
2. **ä¸åŒå…´è¶£ Agent æ¢ç´¢**ï¼šåˆ›å»ºä¸‰ä¸ªå…´è¶£ä¸åŒçš„ Agentï¼Œè§‚å¯Ÿä»–ä»¬åœ¨ä¸åŒåœºæ™¯ä¸­çš„æ¢ç´¢å’Œäº’åŠ¨
3. **ç¤¾äº¤æ•…äº‹ç”Ÿæˆ**ï¼šè¿è¡Œæ¨¡æ‹Ÿåï¼Œä¸ºç‰¹å®š Agent ç”Ÿæˆç¤¾äº¤æ•…äº‹å’Œæ¯æ—¥æŠ¥å‘Š

### éªŒè¯è¦ç‚¹

1. **Soulverse æ¨¡å¼æ£€æµ‹**ï¼šç¡®è®¤ `scrollweaver.server.is_soulverse_mode == True`
2. **åŠ¨æœºç”Ÿæˆ**ï¼šç¡®è®¤ UserAgent çš„åŠ¨æœºåŒ…å«ç¤¾äº¤ç›®æ ‡
3. **Agent è¡Œä¸º**ï¼šç¡®è®¤ Agent åŸºäºå…´è¶£é€‰æ‹©åœºæ™¯å¹¶ç§¯æäº’åŠ¨
4. **ç¤¾äº¤æ•…äº‹**ï¼šç¡®è®¤æ•…äº‹èšç„¦ç¤¾äº¤äº’åŠ¨å¹¶åŒ…å«å‡†ç¡®çš„ç»Ÿè®¡æ•°æ®

---

## å¸¸è§é—®é¢˜

### Q: Agent Code å¿…é¡»å”¯ä¸€å—ï¼Ÿ

A: æ˜¯çš„ï¼ŒAgent Code å¿…é¡»å…¨å±€å”¯ä¸€ã€‚å¦‚æœåˆ›å»ºæ—¶ä½¿ç”¨å·²å­˜åœ¨çš„ Codeï¼Œä¼šè¿”å›é”™è¯¯ã€‚

### Q: æ—¶é—´åŠ é€Ÿæ¯”ä¾‹æ˜¯å¤šå°‘ï¼Ÿ

A: é»˜è®¤æ˜¯ 60 å€é€Ÿï¼Œå³ 1 å®é™…åˆ†é’Ÿ = 1 è™šæ‹Ÿå°æ—¶ã€‚å¯åœ¨ `TimeSimulator` ä¸­ä¿®æ”¹ã€‚

### Q: æ”¯æŒå¤šç”¨æˆ·å—ï¼Ÿ

A: æ˜¯çš„ï¼Œå¤šä¸ªç”¨æˆ· Agent å¯ä»¥åœ¨åŒä¸€ä¸ªæ²™ç›’ä¸­äº’åŠ¨ã€‚

### Q: æ•°æ®ä¼šæŒä¹…åŒ–ä¿å­˜å—ï¼Ÿ

A: å½“å‰ç‰ˆæœ¬æ•°æ®ä¼šä¿å­˜åˆ° `data/` ç›®å½•ï¼Œä½†é‡å¯åéœ€è¦é‡æ–°åŠ è½½ã€‚ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨æ•°æ®åº“ã€‚

### Q: å¦‚ä½•åˆ‡æ¢ LLM æ¨¡å‹ï¼Ÿ

A: ä¿®æ”¹ `config.json` ä¸­çš„ `role_llm_name` å’Œ `world_llm_name`ï¼Œå¹¶ç¡®ä¿å¯¹åº”çš„ API Key å·²é…ç½®ã€‚

### Q: WebSocket è¿æ¥å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

A: æ£€æŸ¥åç«¯æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œç«¯å£æ˜¯å¦æ­£ç¡®ï¼Œä»¥åŠé˜²ç«å¢™è®¾ç½®ã€‚

---

## å·²çŸ¥é—®é¢˜ä¸æ”¹è¿›è®¡åˆ’

### é«˜ä¼˜å…ˆçº§

- [ ] æ¨¡å¼çŠ¶æ€æ˜¾ç¤ºï¼šåœ¨ç•Œé¢é¡¶éƒ¨æ˜¾ç¤ºå½“å‰æ¨¡å¼ï¼ˆè§‚å¯Ÿè€…/çµé­‚é™ä¸´ï¼‰
- [ ] Agent åˆ›å»ºåè‡ªåŠ¨åˆ·æ–°ï¼šè§’è‰²åˆ—è¡¨è‡ªåŠ¨æ›´æ–°
- [ ] æ—¶é—´æ§åˆ¶é¢æ¿ï¼šæ·»åŠ æ—¶é—´åŠ é€Ÿå’Œæš‚åœåŠŸèƒ½

### ä¸­ä¼˜å…ˆçº§

- [ ] ç¤¾äº¤æ•…äº‹æ—¶é—´çº¿è§†å›¾ï¼šæ›´å‹å¥½çš„æ˜¾ç¤ºæ–¹å¼
- [ ] æ¨¡å¼åˆ‡æ¢ä¼˜åŒ–ï¼šæ›´æµç•…çš„åˆ‡æ¢ä½“éªŒ
- [ ] Agent åˆ›å»ºæµç¨‹ä¼˜åŒ–ï¼šè‡ªåŠ¨ç”Ÿæˆ Code å’Œé¢„è§ˆ

### ä½ä¼˜å…ˆçº§

- [ ] å…³ç³»ç½‘ç»œå¯è§†åŒ–ï¼šç¤¾äº¤ç½‘ç»œå›¾
- [ ] å®æ—¶é€šçŸ¥ç³»ç»Ÿï¼šæ¨é€é‡è¦äº‹ä»¶
- [ ] æ•°æ®åˆ†æé¢æ¿ï¼šæ›´æ·±å…¥çš„ç»Ÿè®¡å’Œåˆ†æ

---

## è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

## ä½œè€…ä¸å¼•ç”¨

**ä½œè€…**: Yiting Ran, Xintao Wang, Tian Qiu, Jiaqing Liang, Yanghua Xiao, Deqing Yang

**è®ºæ–‡å¼•ç”¨**:

```bibtex
@inproceedings{ran2025scrollweaver,
  title={BOOKWORLD: From Novels to Interactive Agent Societies for Story Creation},
  author={Ran, Yiting and Wang, Xintao and Qiu, Tian and Liang, Jiaqing and Xiao, Yanghua and Yang, Deqing},
  booktitle={Proceedings of the 63rd Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)},
  pages={15898--15912},
  year={2025}
}
```

---

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## è”ç³»æ–¹å¼

Soulverse æ˜¯ä¸€ä¸ªåŸºç¡€æ¡†æ¶ï¼Œæˆ‘ä»¬è‡´åŠ›äºæŒç»­ä¼˜åŒ–å’Œä¸°å¯Œè‡ªå®šä¹‰æ¨¡å—ã€‚æˆ‘ä»¬éå¸¸æ¬¢è¿æ‚¨çš„å»ºè®®å’Œè´¡çŒ®ï¼

å¦‚æœ‰ä»»ä½•å»ºè®®æˆ–æƒ³è¦è´¡çŒ®ï¼Œè¯·è”ç³»æˆ‘ä»¬ï¼š**alienet1109@163.com**

---

## è‡´è°¢

- [ScrollWeaver](https://github.com/Jinqitrip/Soulverse) - å¤šæ™ºèƒ½ä½“æ¨¡æ‹Ÿå¼•æ“
- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£ Web æ¡†æ¶
- [Next.js](https://nextjs.org/) - React æ¡†æ¶
- [Three.js](https://threejs.org/) - 3D å›¾å½¢åº“
- [ChromaDB](https://www.trychroma.com/) - å‘é‡æ•°æ®åº“

---

<div align="center">

**å‡†å¤‡å¥½å¼€å¯ä½ çš„å¹³è¡Œäººç”Ÿäº†å—ï¼Ÿ** ğŸš€

[å¼€å§‹ä½¿ç”¨](#å¿«é€Ÿå¼€å§‹) | [æŸ¥çœ‹æ–‡æ¡£](#ä½¿ç”¨æŒ‡å—) | [è´¡çŒ®ä»£ç ](#è´¡çŒ®æŒ‡å—)

</div>
