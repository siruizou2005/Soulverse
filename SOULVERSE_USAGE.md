# Soulverse 使用说明

## 快速开始

### 1. 启动服务器
```bash
python server.py
```
或
```bash
uvicorn server:app --host 0.0.0.0 --port 8001
```

### 2. 打开浏览器
访问 `http://localhost:8001`

## 核心功能使用

### 创建用户Agent

1. **打开Soulverse面板**
   - 点击右侧工具栏的 "Soulverse" 标签

2. **填写信息**
   - 用户ID：输入你的用户标识（例如：`user_001`）
   - Agent代码：输入Agent的唯一代码（例如：`my_agent_001`）

3. **创建Agent**
   - 点击"创建Agent"按钮
   - 系统会自动从Soul模拟API获取你的兴趣图谱（兴趣标签、MBTI、性格等）
   - Agent创建成功后会自动加入沙盒

### 观察者模式

**功能**：查看你的Agent在虚拟世界中的自主活动

**使用步骤**：
1. 在Soulverse面板的"观察者模式"区域
2. 从下拉框选择你的Agent
3. 点击"查看社交故事"查看最近24小时的互动记录
4. 点击"查看日报"查看每日活动总结

**查看内容**：
- 社交故事：Agent的所有互动记录，按时间顺序排列
- 社交日报：包含摘要、亮点事件、互动统计等信息

### 灵魂降临模式

**功能**：完全控制你的Agent，亲自参与互动

**使用步骤**：
1. 在左侧角色列表中选择你的Agent（或通过"选择角色"按钮）
2. 系统会自动检测这是用户Agent，进入灵魂降临模式
3. 当Agent需要行动时，系统会暂停并等待你的输入
4. 在输入框输入Agent的行动/对话
5. 可以点击"AI自动完成"按钮获取AI建议的行动选项

**模式切换**：
- 点击"进入灵魂降临"按钮手动切换模式
- 在观察者模式下，Agent会自主行动，你只能查看
- 在灵魂降临模式下，Agent的所有行动都需要你输入

## 工作流程示例

### 场景1：纯观察模式
```
1. 创建Agent → 2. 点击"开始"让沙盒运行 → 3. 切换到观察者模式查看Agent活动
```

### 场景2：参与互动
```
1. 创建Agent → 2. 选择Agent进入灵魂降临模式 → 3. 点击"开始" → 4. 当Agent需要行动时输入内容
```

### 场景3：混合模式
```
1. 创建Agent → 2. 先观察一段时间 → 3. 发现有趣的互动 → 4. 切换到灵魂降临模式参与
```

## API端点

### 创建用户Agent
```bash
POST /api/create-user-agent
Body: {
  "user_id": "user_001",
  "role_code": "my_agent_001",
  "soul_profile": {...}  # 可选，不提供则自动生成
}
```

### 获取社交故事
```bash
GET /api/get-social-story/{agent_code}?hours=24
```

### 获取日报
```bash
GET /api/get-daily-report/{agent_code}?date=2024-01-01
```

## 注意事项

1. **Agent代码必须唯一**：如果已存在相同代码的Agent，创建会失败
2. **时间加速**：系统默认1实际分钟 = 1虚拟小时（60倍速）
3. **多用户支持**：多个用户Agent可以在同一沙盒中互动
4. **数据持久化**：目前是Demo版本，数据不会持久化保存

## 故障排除

**问题**：创建Agent失败
- 检查Agent代码是否已存在
- 检查服务器日志查看详细错误

**问题**：无法查看社交故事
- 确保Agent已经参与了一些互动
- 检查Agent代码是否正确

**问题**：灵魂降临模式不工作
- 确保已选择你的Agent
- 检查WebSocket连接是否正常

